(function(e,t,n){"use strict";function Et(){var t=300;U.css("top",pt);it.css("top",pt);vt=Math.floor(U.offset().top+U.outerHeight(!0)-100);U.attr(S,vt);mt=Math.floor(U.offset().top);z.attr(E,mt);Y.each(function(n){var r=e(this),i=r.attr(b),s=r.find(c);r.css("z-index",t++);r.attr(E,Math.floor(r.offset().top)-42);r.attr(S,parseInt(r.attr(E),10)+parseInt(r.outerHeight(!0),10));s.each(function(){var t=e(this),n=t.find(y);t.attr(E,Math.floor(t.offset().top)-62);t.attr(S,parseInt(t.attr(E),10)+parseInt(t.outerHeight(!0),10))})})}function St(){wt=D.scrollTop();wt=wt?wt:0;wt>=z.attr(E)&&U.attr(S)>=wt?z.addClass(C).removeClass(r):wt>=z.attr(E)&&U.attr(S)<=wt?z.addClass(C).addClass(r):z.removeClass(r).removeClass(C);Y.each(function(){var t=e(this),n=t.find(c),r=t.find(g),i=r.text(),o=t.attr(E),u=t.attr(S),a=n.eq(0).text();if(nt!==i){if(wt>=o&&u>=wt){nt=i;rt=a;W.text(i);X.text(a);return!1}}else n.each(function(){var t=e(this),n=t.attr(E),r=t.attr(S),i=t.find(h),o=i.text();if(rt!==o&&wt>=n&&r>=wt){rt=o;X.text(o).addClass(s);setTimeout(function(){X.removeClass(s)},500);return!1}})})}function xt(t){var n=D.innerWidth(),r=I.find(w),i=V.find(w),s='<li id="logo" data-project="contact"><a href="#contact" title="Zach Stubenvoll" id="zach">Zach Stubenvoll</a><a href="mailto:zachstubenvoll@me.com" title="For Hire" id="for-hire"><b>For Hire</b></a></li>';if(r.length<=0&&i.length<=0){Y.each(function(t){var n=e(this),r=n.attr(b),i=n.find(c),s=n.find(g),o=s.text(),u=s.attr("nav-title"),a=u!==undefined?u:s.text();n.attr(E,Math.floor(n.offset().top)-42);n.attr(S,n.attr(E)+n.outerHeight(!0));I.append('<li data-project="'+r+'"><a href="#'+r+'" title="'+a+'">'+o+"</a></li>");V.append('<li data-project="'+r+'"><a href="#'+r+'" title="'+a+'">'+a+"</a></li>")});I.find(w).eq(4).before(s)}if(n>767){I.find(w).css({height:t+x});ot.css({height:t-t/3+x});ut.css(d,t-t/3+50+x);at.css(d,t-50+x);F.addClass(N);st.addClass(N);U.removeClass(v);it.removeClass(v);tt.each(function(){var t=e(this);t.find("b").length||t.append("<b>close</b>")})}else{ht.css(d,o);ut.css(d,o);at.css(d,o)}}function Tt(n){var r=e(p+n),i=r.offset().top;B.animate({scrollTop:i},300);St();try{t._gaq.push([L,O,A,n.attr(b)])}catch(s){}}function Nt(n){H.append('<div id="modal"><a class="close" href="#" title="Close">Close</a></div>');gt=e("#modal");var r=new t.Image;r.onload=function(){gt.prepend(r);yt=gt.find(y);Ct();yt.click(function(e){e.stopPropagation()});gt.addClass(N)};r.src=n;e("html").css("overflow","hidden");gt.find(".close").click(function(e){e.preventDefault()});gt.click(function(){kt()})}function Ct(){yt||(yt=gt.find(y));if(yt.height()<D.height()){yt.addClass("centered");yt.css({marginTop:"-"+yt.height()/2+x,marginLeft:"-"+yt.width()/2+x})}else{yt.removeClass("centered");yt.css({marginTop:"0px",marginLeft:"auto"})}}function kt(){if(gt.length>0){e("html").css({"overflow-y":"scroll","overflow-x":"hidden"});gt.removeClass(N).addClass(v);setTimeout(function(){gt.remove()},200);D.off("resize",Ct)}}var r="about",i="alt",s="animate",o="auto",u="b",a=": ",f="contact",l="div",c="figure",h="figcaption",p="#",d="height",v="hide",m="href",g="h2",y="img",b="id",w="li",E="data-offset-top",S="data-offset-bottom",x="px",T="data-project",N="show",C="stay",k="ul",L="_trackEvent",A="Scroll to section",O="Zach Stubenvoll",M=function(){},_=t.console||{log:M,warn:M,error:M},D=e(t),P=e("html"),H=e("body"),B=P.add(H),j=e("nav"),F=e("#main-nav"),I=F.find("ul"),q=e("#zach"),R=I.find("li"),U=e("#main"),z=U.find("#main-header"),W=z.find("h2 b"),X=z.find("h2 strong"),V=z.find("h2 ul"),$=V.find("li"),J=e("#contact-me"),K=z.find("h1"),Q=z.find("h2 i"),G=J.find("i"),Y=U.find("ol li"),Z=Y.find("h2"),et=Y.find("img"),tt=Y.find("article"),nt="",rt="",it=e("#contact"),st=it.find("#contact-nav"),ot=st.find("li"),ut=it.find("#footer-header"),at=it.find("p"),ft=it.find("#credits"),lt=ft.find("i"),ct=e(".modal"),ht=j.find("li"),pt=t.innerHeight,dt=pt/3,vt,mt,gt,yt,bt,wt=0;ct.on("click",function(t){t.preventDefault();Nt(e(this).attr("data-image"))});e(n.documentElement).keyup(function(e){e.keyCode===27&&kt()});lt.click(function(){H.append('<div id="party-mode"><b></b></div>');bt=e("#party-mode");bt.addClass(N);bt.on("click",function(){e(this).removeClass(N)})});G.click(function(e){e.preventDefault();Tt(f)});Q.click(function(t){t.preventDefault();e(this).parent().find(k).toggleClass(N)});K.click(function(e){e.preventDefault();B.animate({scrollTop:0},600)});J.click(function(e){e.preventDefault();Tt(f)});V.on("click",w,function(t){var n=e(this);t.preventDefault();n.closest(k).toggleClass(N);Tt(n.attr(T))});F.on("click","a",function(t){var n=e(this);if(n.attr(b)!=="for-hire"){t.preventDefault();Tt(n.closest(w).attr(T))}});q.on("click",w,function(e){e.preventDefault();Tt(f)});tt.on("click","b",function(){e(this).closest("article").removeClass(N)});et.click(function(){e(this).find("+ article").addClass(N)});Z.click(function(){var t=e(this),n=t.closest(w).find(c);t.toggleClass(N);n.each(function(){var t=e(this);t.toggleClass(N)})});D.resize(function(){pt=e(this).innerHeight();dt=pt/3;U.css("top",pt);it.css("top",pt);Et();xt(dt)});D.scroll(function(){St()});et.on("load",function(){Et()});xt(dt)})(jQuery,window,document);